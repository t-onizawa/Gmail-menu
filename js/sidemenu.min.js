/* @license slidemenuJS v1.0.0 (c) 2014 t-onizawa https://github.com/t-onizawa */
var SIDE_MENU=window.MODULE||{};SIDE_MENU.CLASS_NAME={HIDE:"is-hide",OPEN:"is-open",TRANSITION:"is-transition"},SIDE_MENU.METHOD=function(){function e(e,t){var n=e.className.split(" ");-1==n.indexOf(t)&&(n[n.length]=t),e.className=n.join(" ")}function t(e,t){var n=e.className.split(" ");-1!==n.indexOf(t)&&n.splice(n.indexOf(t),1),e.className=n.length>1?n.join(" "):n[0]||""}function n(e,t){return-1!==e.className.split(" ").indexOf(t)}function s(e,t,n,s){if("id"!==s)for(var a=0,i=e.length;i>a;a++)e[a].style.webkitTransform="translate("+t+"px,"+n+"px)",e[a].style.mozTransform="translate("+t+"px,"+n+"px)",e[a].style.Transform="translate("+t+"px,"+n+"px)";else e.style.webkitTransform="translate("+t+"px,"+n+"px)",e.style.mozTransform="translate("+t+"px,"+n+"px)",e.style.Transform="translate("+t+"px,"+n+"px)"}function a(e,t){if("id"!==t)for(var n=0,s=e.length;s>n;n++)e[n].style.webkitTransform="",e[n].style.mozTransform="",e[n].style.Transform="";else e.style.webkitTransform="",e.style.mozTransform="",e.style.Transform=""}return{addClass:e,removeClass:t,hasClass:n,setTranslate:s,clearTranslate:a}},SIDE_MENU.MODULE=function(e){function t(){u.hasClass(m,SIDE_MENU.CLASS_NAME.OPEN)?s():n()}function n(){u.addClass(m,SIDE_MENU.CLASS_NAME.OPEN),u.removeClass(N,SIDE_MENU.CLASS_NAME.HIDE),i()}function s(){u.removeClass(m,SIDE_MENU.CLASS_NAME.OPEN),setTimeout(function(){u.addClass(N,SIDE_MENU.CLASS_NAME.HIDE)},300),r()}function a(e){e.detail.event.preventDefault()}function i(){document.addEventListener("touchmove",function(e){var t=new CustomEvent("noScroll",{detail:{event:e}});document.dispatchEvent(t)},!1),document.addEventListener("noScroll",a,!1)}function r(){document.removeEventListener("noScroll",a,!1)}function o(e){u.hasClass(m,SIDE_MENU.CLASS_NAME.OPEN)&&(T=!0,v=parseInt(f[0].getBoundingClientRect().left),I.start=e.touches[0].screenX)}function c(e){u.hasClass(m,SIDE_MENU.CLASS_NAME.OPEN)&&(T=!0,I.move=e.changedTouches[0].screenX,d())}function l(e){0!==parseInt(f[0].getBoundingClientRect().left)&&(T=!1,I.end=e.changedTouches[0].screenX,E())}function d(){if(T){var e=parseInt(I.move-I.start),t=v+e;u.removeClass(m,SIDE_MENU.CLASS_NAME.TRANSITION),i(),u.setTranslate(f,t,0)}}function E(){u.addClass(m,SIDE_MENU.CLASS_NAME.TRANSITION),u.clearTranslate(f),parseInt(f[0].getBoundingClientRect().left)<window.innerWidth/2&&s()}var u=new SIDE_MENU.METHOD,m=document.getElementById(e.mainId),f=m.getElementsByClassName(e.slideCls),N=document.getElementById(e.menuId),S=document.getElementById(e.btnId),I={},T=!1,v=0;!function(){S.addEventListener("touchend",t,!1),m.addEventListener("touchstart",o,!1),m.addEventListener("touchmove",c,!1),m.addEventListener("touchend",l,!1)}()},SIDE_MENU.INNER_SCROLL=function(e){function t(){c=window.innerHeight}function n(){return d.clientHeight+E>c}function s(e){n()&&(currentY=parseInt(d.getBoundingClientRect().top),u.start=e.touches[0].screenY,u.startTime=(new Date).getTime())}function a(e){n()&&(u.move=e.changedTouches[0].screenY,r())}function i(e){n()&&(u.end=e.changedTouches[0].screenY,u.endTime=(new Date).getTime(),o())}function r(){var e=parseInt(u.move-u.start),t=currentY+e;l.setTranslate(d,0,t,"id");}function o(){var e=parseInt(d.getBoundingClientRect().top),t=d.clientHeight+E,n=u.endTime-u.startTime,s=400>n?400/n:1;inertia=currentY+parseInt(u.end-u.start)*s,l.addClass(d,SIDE_MENU.CLASS_NAME.TRANSITION),e>0||inertia>0?l.setTranslate(d,0,0,"id"):c-t>e||c-t>inertia?l.setTranslate(d,0,c-t,"id"):l.setTranslate(d,0,inertia,"id"),setTimeout(function(){l.removeClass(d,SIDE_MENU.CLASS_NAME.TRANSITION)},300)}var c,l=new SIDE_MENU.METHOD,d=document.getElementById(e.scrollId),E=e.fixHeaderHeight?e.fixHeaderHeight:0,u={};!function(){var e,n=300;window.addEventListener("resize",function(){e!==!1&&clearTimeout(e),e=setTimeout(function(){t()},n)}),d.addEventListener("touchstart",s,!1),d.addEventListener("touchmove",a,!1),d.addEventListener("touchend",i,!1),t()}()};